{"version":3,"file":"index.js","sources":["../src/config.ts","../src/connector.ts","../node_modules/@elysiajs/cors/dist/index.mjs","../src/routes.ts","../src/index.ts"],"sourcesContent":["import { open } from 'lmdb';\r\n\r\nexport interface DatabaseConfig {\r\n  name: string;\r\n  path: string;\r\n}\r\n\r\nexport interface ServerConfig {\r\n  port: number;\r\n  host: string;\r\n}\r\n\r\nexport interface Config {\r\n  databases: DatabaseConfig[];\r\n  server: ServerConfig;\r\n  logLevel: 'debug' | 'info' | 'warn' | 'error';\r\n}\r\n\r\nexport const DEFAULT_CONFIG: Config = {\r\n  databases: [\r\n    { name: 'main', path: './data/' }\r\n  ],\r\n  server: {\r\n    port: 5000,\r\n    host: '127.0.0.1'\r\n  },\r\n  logLevel: 'info'\r\n};\r\n\r\nexport let RUNTIME_CONFIG: Config = { ...DEFAULT_CONFIG };\r\n\r\nexport function setConfig(newConfig: Partial<Config>) {\r\n  RUNTIME_CONFIG = { ...RUNTIME_CONFIG, ...newConfig };\r\n}\r\n\r\nexport const databases: { [key: string]: ReturnType<typeof open> } = {};\r\n\r\nexport function initializeDatabases() {\r\n  RUNTIME_CONFIG.databases.forEach(dbConfig => {\r\n    databases[dbConfig.name] = open({\r\n      path: dbConfig.path,\r\n      compression: true,\r\n    });\r\n  });\r\n}","import { databases } from './config';\r\n\r\nexport class Connector {\r\n  static async get(dbName: string, key: string): Promise<any> {\r\n    if (!databases[dbName]) {\r\n      throw new Error(`Database ${dbName} not found`);\r\n    }\r\n    const db = databases[dbName];\r\n    return await db.get(key);\r\n  }\r\n\r\n  static async put(dbName: string, key: string, value: any): Promise<void> {\r\n    if (!databases[dbName]) {\r\n      throw new Error(`Database ${dbName} not found`);\r\n    }\r\n    const db = databases[dbName];\r\n    await db.put(key, value);\r\n  }\r\n\r\n  static async remove(dbName: string, key: string): Promise<void> {\r\n    if (!databases[dbName]) {\r\n      throw new Error(`Database ${dbName} not found`);\r\n    }\r\n    const db = databases[dbName];\r\n    await db.remove(key);\r\n  }\r\n\r\n  static async getAll(dbName: string): Promise<any[]> {\r\n    if (!databases[dbName]) {\r\n      throw new Error(`Database ${dbName} not found`);\r\n    }\r\n    const db = databases[dbName];\r\n    const items: { key: string; value: any }[] = [];\r\n    for await (const { key, value } of db.getRange()) {\r\n      items.push({ key: key.toString(), value });\r\n    }\r\n    return items;\r\n  }\r\n}","// src/index.ts\nimport { Elysia } from \"elysia\";\nvar isBun = typeof new Headers()?.toJSON === \"function\";\nvar processHeaders = (headers) => {\n  if (isBun) return Object.keys(headers.toJSON()).join(\", \");\n  let keys = \"\";\n  headers.forEach((_, key) => {\n    keys += key + \", \";\n  });\n  if (keys) keys = keys.slice(0, -1);\n  return keys;\n};\nvar processOrigin = (origin, request, from) => {\n  if (Array.isArray(origin))\n    return origin.some((o) => processOrigin(o, request, from));\n  switch (typeof origin) {\n    case \"string\":\n      if (origin.indexOf(\"://\") === -1) return from.includes(origin);\n      return origin === from;\n    case \"function\":\n      return origin(request) === true;\n    case \"object\":\n      if (origin instanceof RegExp) return origin.test(from);\n  }\n  return false;\n};\nvar cors = (config) => {\n  let {\n    aot = true,\n    origin = true,\n    methods = true,\n    allowedHeaders = true,\n    exposeHeaders = true,\n    credentials = true,\n    maxAge = 5,\n    preflight = true\n  } = config ?? {};\n  if (Array.isArray(allowedHeaders))\n    allowedHeaders = allowedHeaders.join(\", \");\n  if (Array.isArray(exposeHeaders)) exposeHeaders = exposeHeaders.join(\", \");\n  const origins = typeof origin === \"boolean\" ? void 0 : Array.isArray(origin) ? origin : [origin];\n  const app = new Elysia({\n    name: \"@elysiajs/cors\",\n    seed: config,\n    aot\n  });\n  const anyOrigin = origins?.some((o) => o === \"*\");\n  const handleOrigin = (set, request) => {\n    if (origin === true) {\n      set.headers.vary = \"*\";\n      set.headers[\"access-control-allow-origin\"] = request.headers.get(\"Origin\") || \"*\";\n      return;\n    }\n    if (anyOrigin) {\n      set.headers.vary = \"*\";\n      set.headers[\"access-control-allow-origin\"] = \"*\";\n      return;\n    }\n    if (!origins?.length) return;\n    const headers = [];\n    if (origins.length) {\n      const from = request.headers.get(\"Origin\") ?? \"\";\n      for (let i = 0; i < origins.length; i++) {\n        const value = processOrigin(origins[i], request, from);\n        if (value === true) {\n          set.headers.vary = origin ? \"Origin\" : \"*\";\n          set.headers[\"access-control-allow-origin\"] = from || \"*\";\n          return;\n        }\n        if (value) headers.push(value);\n      }\n    }\n    set.headers.vary = \"Origin\";\n    if (headers.length)\n      set.headers[\"access-control-allow-origin\"] = headers.join(\", \");\n  };\n  const handleMethod = (set, method) => {\n    if (!method) return;\n    if (methods === true)\n      return set.headers[\"access-control-allow-methods\"] = method ?? \"*\";\n    if (methods === false || !methods?.length) return;\n    if (methods === \"*\")\n      return set.headers[\"access-control-allow-methods\"] = \"*\";\n    if (!Array.isArray(methods))\n      return set.headers[\"access-control-allow-methods\"] = methods;\n    set.headers[\"access-control-allow-methods\"] = methods.join(\", \");\n  };\n  const defaultHeaders = {};\n  if (typeof exposeHeaders === \"string\")\n    defaultHeaders[\"access-control-expose-headers\"] = exposeHeaders;\n  if (typeof allowedHeaders === \"string\")\n    defaultHeaders[\"access-control-allow-headers\"] = allowedHeaders;\n  if (credentials === true)\n    defaultHeaders[\"access-control-allow-credentials\"] = \"true\";\n  app.headers(defaultHeaders);\n  function handleOption({ set, request, headers }) {\n    handleOrigin(set, request);\n    handleMethod(set, request.headers.get(\"access-control-request-method\"));\n    if (allowedHeaders === true || exposeHeaders === true) {\n      if (allowedHeaders === true)\n        set.headers[\"access-control-allow-headers\"] = headers[\"access-control-request-headers\"];\n      if (exposeHeaders === true)\n        set.headers[\"access-control-expose-headers\"] = Object.keys(headers).join(\",\");\n    }\n    if (maxAge) set.headers[\"access-control-max-age\"] = maxAge.toString();\n    return new Response(null, {\n      status: 204\n    });\n  }\n  if (preflight) app.options(\"/\", handleOption).options(\"/*\", handleOption);\n  return app.onRequest(function processCors({ set, request }) {\n    handleOrigin(set, request);\n    handleMethod(set, request.method);\n    if (allowedHeaders === true || exposeHeaders === true) {\n      const headers = processHeaders(request.headers);\n      if (allowedHeaders === true)\n        set.headers[\"access-control-allow-headers\"] = headers;\n      if (exposeHeaders === true)\n        set.headers[\"access-control-expose-headers\"] = headers;\n    }\n  });\n};\nvar src_default = cors;\nexport {\n  cors,\n  src_default as default\n};\n","import { Elysia } from 'elysia';\r\nimport { Connector } from './connector';\r\nimport { cors } from '@elysiajs/cors';\r\n\r\nexport function setupRoutes(app: Elysia) {\r\n  app.use(cors());\r\n\r\n  // REST API endpoints\r\n  app.get('/api', () => {\r\n    return Object.keys(Connector.getAll);\r\n  });\r\n\r\n  app.get('/api/:dbName/:key', async ({ params }) => {\r\n    try {\r\n      const { dbName, key } = params;\r\n      return await Connector.get(dbName, key);\r\n    } catch (error: unknown) {\r\n      return handleError(error);\r\n    }\r\n  });\r\n\r\n  app.post('/api/:dbName', async ({ params, body }) => {\r\n    try {\r\n      const { dbName } = params;\r\n      const { key, value } = body as { key: string; value: any };\r\n      await Connector.put(dbName, key, value);\r\n      return { success: true };\r\n    } catch (error: unknown) {\r\n      return handleError(error);\r\n    }\r\n  });\r\n\r\n  app.delete('/api/:dbName/:key', async ({ params }) => {\r\n    try {\r\n      const { dbName, key } = params;\r\n      await Connector.remove(dbName, key);\r\n      return { success: true };\r\n    } catch (error: unknown) {\r\n      return handleError(error);\r\n    }\r\n  });\r\n\r\n  app.get('/api/:dbName', async ({ params }) => {\r\n    try {\r\n      const { dbName } = params;\r\n      return await Connector.getAll(dbName);\r\n    } catch (error: unknown) {\r\n      return handleError(error);\r\n    }\r\n  });\r\n\r\n  // WebSocket support\r\n  app.ws('/ws', {\r\n    open(ws) {\r\n      console.log('WebSocket connected');\r\n    },\r\n    message(ws, message) {\r\n      const { action, dbName, key, value } = JSON.parse(message as string);\r\n      let response;\r\n      switch (action) {\r\n        case 'get':\r\n          response = Connector.get(dbName, key);\r\n          break;\r\n        case 'put':\r\n          response = Connector.put(dbName, key, value);\r\n          break;\r\n        case 'remove':\r\n          response = Connector.remove(dbName, key);\r\n          break;\r\n        case 'getAll':\r\n          response = Connector.getAll(dbName);\r\n          break;\r\n        default:\r\n          response = Promise.resolve({ error: 'Invalid action' });\r\n      }\r\n      response.then(result => ws.send(JSON.stringify(result)));\r\n    },\r\n    close(ws) {\r\n      console.log('WebSocket closed');\r\n    }\r\n  });\r\n}\r\n\r\nfunction handleError(error: unknown): Response {\r\n  const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred';\r\n  return new Response(JSON.stringify({ error: errorMessage }), {\r\n    status: 500,\r\n    headers: { 'Content-Type': 'application/json' }\r\n  });\r\n}","/// <reference types=\"bun-types\" />\r\n\r\nimport { Elysia } from 'elysia';\r\nimport { RUNTIME_CONFIG, initializeDatabases, setConfig } from './config';\r\nimport { setupRoutes } from './routes';\r\nimport { Connector } from './connector';\r\n\r\nexport { setConfig, initializeDatabases, Connector };\r\n\r\nexport function createServer() {\r\n  const app = new Elysia();\r\n  setupRoutes(app);\r\n  return app;\r\n}\r\n\r\nexport function startServer(app: Elysia) {\r\n  app.listen({\r\n    port: RUNTIME_CONFIG.server.port,\r\n    hostname: RUNTIME_CONFIG.server.host\r\n  }, () => {\r\n    console.log(`Server is running on http://${RUNTIME_CONFIG.server.host}:${RUNTIME_CONFIG.server.port}`);\r\n  });\r\n}\r\n\r\n// Проверка, запущен ли файл напрямую\r\nif (typeof Bun !== 'undefined' && Bun.main === import.meta.path) {\r\n  initializeDatabases();\r\n  const app = createServer();\r\n  startServer(app);\r\n}"],"names":["open","Elysia"],"mappings":"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"}